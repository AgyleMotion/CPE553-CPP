/windbarb {
  /v exch def
  /barbsize exch def
  /barbtilt exch def

  newpath
  0 0 moveto
  0 1 rlineto stroke
  /flags v 50 idiv def % number of flags
  /y 1 def
  1 1 flags exch {
    newpath
    0 y moveto
    barbsize 0 rlineto
    barbsize neg barbtilt neg rlineto
    fill
    /y y barbtilt sub def
  } for
0 setlinewidth
  /v v flags 50 mul sub def
  /barbs v 10 idiv def
  1 1 barbs {
    newpath
    barbsize y moveto
    barbsize neg barbtilt neg rlineto stroke
    /y y barbtilt sub def
  } for
  /v v barbs 10 mul sub def
  /half v 5 idiv def
  1 1 half {
    newpath
    barbsize 2 div y moveto
    barbsize 2 div neg barbtilt 2 div neg rlineto stroke
    /y y barbtilt sub def    
  } for
} def

0 setlinewidth
0 0 0 setrgbcolor
300 300 translate
200 200 scale
/Helvetica findfont 1 scalefont setfont
0 0 moveto
%(abc) show
1 .1 50 windbarb
0 10 360 {
  dup 
  gsave
     rotate
    .1 .07 2 1 roll windbarb
  grestore
}
    .1 .07 2 1 roll windbarb
showpage
